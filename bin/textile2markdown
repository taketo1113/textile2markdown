#!/usr/bin/env ruby

require "#{File.dirname(__FILE__)}/../lib/textile2markdown.rb"
converter = Textile2Markdown.new
textile_file = ARGV.first
unless ARGV.size >= 1 && ARGV.size <= 2
  puts "Usage: textile2markdown <textile input filename> [<markdown output filename>]" 
  exit 1
end


# args
textile_filename = ARGV[0]
markdown_filename = ARGV[1] ||= "#{textile_filename}.markdown"

# read textline file
textile = IO.read(textile_filename)

# output
File.open(markdown_filename, 'w') do |markdown_file|
  markdown_file.write(converter.convert(textile))
end
